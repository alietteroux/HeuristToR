<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="So far, this package contains only one function : hr_import(). This function reads XML files exported from Heurist (https://heuristnetwork.org/) to build as many dataframes as record types are used in the Heurist database. Each Heurist record type matches a dataframe ; each Heurist record matches a row in a dataframe. Furthermore, this function builds two other dataframes describing fields (type, help text, requirement, repeatability...) and vocabularies.">
<title>To make easier quantitative analysis from Heurist databases • HeuristToR</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="To make easier quantitative analysis from Heurist databases">
<meta property="og:description" content="So far, this package contains only one function : hr_import(). This function reads XML files exported from Heurist (https://heuristnetwork.org/) to build as many dataframes as record types are used in the Heurist database. Each Heurist record type matches a dataframe ; each Heurist record matches a row in a dataframe. Furthermore, this function builds two other dataframes describing fields (type, help text, requirement, repeatability...) and vocabularies.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">HeuristToR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/alietteroux/HeuristToR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><ul>
<li><a href="#heuristtor" id="toc-heuristtor">HeuristToR</a></li>
<li><a href="#installation" id="toc-installation">Installation</a></li>
<li><a href="#before-using-heuristtor-export-xml-files-from-heurist" id="toc-before-using-heuristtor-export-xml-files-from-heurist">Before using HeuristToR : export XML files from Heurist</a></li>
<li><a href="#example-database-and-data-files" id="toc-example-database-and-data-files">Example database and data files</a></li>
<li>
<a href="#read-data-and-paradata-from-heurist-database-with-hr_import-function" id="toc-read-data-and-paradata-from-heurist-database-with-hr_import-function">Read data and paradata from Heurist database, with <em>hr_import()</em> function</a>
<ul>
<li><a href="#about-columns-names-and-formats" id="toc-about-columns-names-and-formats">About columns names and formats</a></li>
<li><a href="#dealing-with-repeatable-fields-multiple-values-in-a-field-for-one-record" id="toc-dealing-with-repeatable-fields-multiple-values-in-a-field-for-one-record">Dealing with “repeatable” fields (multiple values in a field for one record)</a></li>
<li>
<a href="#columns-z.h.reversepointer" id="toc-columns-z.h.reversepointer">Columns “z.h.reversePointer”</a>
<ul>
<li><a href="#target-dataframes-corresponding-to-resource-fields" id="toc-target-dataframes-corresponding-to-resource-fields">“Target dataframes” corresponding to <em>resource fields</em></a></li>
<li><a href="#target-dataframes-corresponding-to-children-records" id="toc-target-dataframes-corresponding-to-children-records">“Target dataframes” corresponding to <em>children records</em></a></li>
</ul>
</li>
<li><a href="#gathering-terms-in-a-vocabulary" id="toc-gathering-terms-in-a-vocabulary">Gathering terms in a vocabulary</a></li>
<li>
<a href="#dealing-with-record-relationship" id="toc-dealing-with-record-relationship">Dealing with “Record relationship”</a>
<ul>
<li><a href="#relationship-marker-fields" id="toc-relationship-marker-fields">“Relationship marker” fields</a></li>
<li><a href="#relation-vocabularies" id="toc-relation-vocabularies">“Relation” vocabularies</a></li>
<li><a href="#record-relationship-dataframe" id="toc-record-relationship-dataframe">“Record relationship” dataframe</a></li>
</ul>
</li>
<li><a href="#dealing-with-place" id="toc-dealing-with-place">Dealing with “Place”</a></li>
<li>
<a href="#dealing-with-temporal-spatial-and-file-fields" id="toc-dealing-with-temporal-spatial-and-file-fields">Dealing with <em>temporal</em>, <em>spatial</em> and <em>file</em> fields</a>
<ul>
<li><a href="#temporal-fields" id="toc-temporal-fields"><em>Temporal</em> fields</a></li>
<li><a href="#spatial-fields" id="toc-spatial-fields"><em>Spatial</em> fields</a></li>
<li><a href="#file-fields" id="toc-file-fields"><em>File</em> fields</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#renaming-tables-and-columns---if-desired" id="toc-renaming-tables-and-columns---if-desired">Renaming tables and columns - if desired</a></li>
<li><a href="#saving-data-into-a-r-data-file" id="toc-saving-data-into-a-r-data-file">Saving data into a R data file</a></li>
</ul>
<div class="section level1">
<div class="page-header"><h1 id="heuristtor">HeuristToR<a class="anchor" aria-label="anchor" href="#heuristtor"></a>
</h1></div>
<p><em>HeuristToR</em> aims to make easier quantitative analysis from <a href="https://heuristnetwork.org/" class="external-link">Heurist databases</a>.</p>
</div>
<div class="section level1">
<h1 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h1>
<p>You can install the development version of HeuristToR from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"alietteroux/HeuristToR"</span>)</span></code></pre></div>
<p> </p>
</div>
<div class="section level1">
<h1 id="before-using-heuristtor--export-xml-files-from-heurist">Before using HeuristToR : export XML files from Heurist<a class="anchor" aria-label="anchor" href="#before-using-heuristtor--export-xml-files-from-heurist"></a>
</h1>
<p><em>hr_import()</em> reads XML files exported from Heurist. To use it, <strong>two XML files must be first exported from Heurist</strong> :</p>
<ul>
<li>a XML file including data (fields’values entered in the database) : this XML file can be exported from Heurist via the <em>Explore</em> menu &gt; <em>Export</em> &gt; <em>XML</em>. Be careful : if some records are selected in your Heurist session during the export, only data about theses selected records may be exported.</li>
<li>a XML file exported from Heurist describing database structure (vocabularies, fields’caracteristics…) : this XML file can be exported from Heurist via the <em>Design</em> menu &gt; <em>Download</em> &gt; <em>Structure (XML)</em>. This should open a window looking <strong>like below</strong> : if not, please wait a few seconds or try with another web browser. Then, click with the right mouse button to save as XML.</li>
</ul>
<p><img src="reference/figures/scanprint_export_structure.png" height="220" style="height:240px;"></p>
<p> </p>
</div>
<div class="section level1">
<h1 id="example-database-and-data-files">Example database and data files<a class="anchor" aria-label="anchor" href="#example-database-and-data-files"></a>
</h1>
<p>We’ve created a fictitious Heurist database, named “aliet_test_R”, viewable at <a href="https://heurist.huma-num.fr/heurist/?db=aliet_test_R&amp;website" class="external-link uri">https://heurist.huma-num.fr/heurist/?db=aliet_test_R&amp;website</a></p>
<p>From this database, we’ve exported two XML files : have a look to the folder “documents/data_example” of the <a href="https://github.com/alietteroux/HeuristToR" class="external-link">Github repository</a>, or directly download these files <a href="https://uncloud.univ-nantes.fr/index.php/s/b5wAr3eHJPcmXAX" class="external-link">here</a>.</p>
<p> </p>
</div>
<div class="section level1">
<h1 id="read-data-and-paradata-from-heurist-database-with-hr_import-function">Read data and paradata from Heurist database, with <em>hr_import()</em> function<a class="anchor" aria-label="anchor" href="#read-data-and-paradata-from-heurist-database-with-hr_import-function"></a>
</h1>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(HeuristToR)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">hr_import</span>(<span class="at">data.file=</span><span class="st">"documents/data_example/aliet_test_R_data.xml"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">structure.file=</span><span class="st">"documents/data_example/aliet_test_R_structure.xml"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; We're importing data and structure files (most time-consuming step)... Thank you for waiting...</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data and structure files have been successfully imported. Now we're selecting and managing data... Thank you for waiting...</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; We've finished. It's ready to use !</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Import has required 7.24 secs</span></span></code></pre></div>
<p>This function returns several dataframes in the Environment :</p>
<ul>
<li>Each Heurist <em>‘record type’</em> as a dataframe : in those dataframes, each row matches a Heurist <em>‘record’</em>
</li>
<li>A dataframe named “<strong>z.h.tables.fields</strong>” : each row describes a field in an used Heurist <em>‘record type’</em> (type, help text, requirement, repeatability…)</li>
<li>A dataframe named “<strong>z.h.vocabularies</strong>” : each row matches a term in an used Heurist vocabulary ; each term is joined to a level (its ranking position in the vocabulary) and attached to its parents’terms</li>
</ul>
<p><strong>If <em>hr_import()</em> returns error messages when you’ll try it</strong>, please <a href="mailto:aliette.roux@univ-nantes.fr">contact us</a>.</p>
<p>With our example from <a href="https://heurist.huma-num.fr/heurist/?db=aliet_test_R&amp;website" class="external-link">this Heurist database (named “aliet_test_R”)</a>, we’ve obtained 8 dataframes :</p>
<p><img src="reference/figures/scanprint_environment_example.png" height="200" style="height:220px;"></p>
<p><strong>If <em>hr_import()</em> has taken a long time</strong>, remember that you can save all objects of the environment in a folder, and open all of them afterwards (see below, last part of this page).</p>
<p><strong>If you’re interested by the function code</strong> : <em>hr_import()</em> reads XML files but, actually, the function script uses <em>readLines()</em> to read them. Indeed, it seems that R is slow to parse XML files, and yet XML Heurist files can be very big ! Therefore, the code may seem convoluted, using regular expressions and different functions to recover XML structure. Note that previously, I had proposed an other solution using <em>xml2</em> library, retrievable in the folder “documents” of the <a href="https://github.com/alietteroux/HeuristToR" class="external-link">Github repository</a>, file “<em>archive_import_Heurist_dans_R_via_XML</em>”. I had to give it up because it was too slow…</p>
<p>Thereafter, we’ll manage data using <em>tidyr</em> and <em>ggplot2</em> ; and we’ll display tables with <em>knitr::kable()</em>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span></code></pre></div>
<p> </p>
<div class="section level2">
<h2 id="about-columns-names-and-formats">About columns names and formats<a class="anchor" aria-label="anchor" href="#about-columns-names-and-formats"></a>
</h2>
<p>Let’s have a look to the dataframe <em>Personne</em> (6 rows and 24 columns) :</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Personne <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 2%">
<col style="width: 5%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 18%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 9%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
z.h.id.Personne
</th>
<th style="text-align: left;">
z.h.title.Personne
</th>
<th style="text-align: left;">
Nom_1
</th>
<th style="text-align: left;">
Prénom
</th>
<th style="text-align: left;">
Sexe
</th>
<th style="text-align: left;">
Date de naissance.temporal.raw
</th>
<th style="text-align: left;">
Date de naissance.temporal.type
</th>
<th style="text-align: left;">
Date de naissance.DAT.raw
</th>
<th style="text-align: left;">
Date de naissance.DAT.year
</th>
<th style="text-align: left;">
Date de naissance.DAT.month
</th>
<th style="text-align: left;">
Date de naissance.DAT.day
</th>
<th style="text-align: left;">
Date de naissance.property.COM
</th>
<th style="text-align: left;">
Date de naissance.property.DET
</th>
<th style="text-align: left;">
Lieu de naissance.geo.type
</th>
<th style="text-align: left;">
Lieu de naissance.geo.wkt
</th>
<th style="text-align: right;">
Nombre de publications
</th>
<th style="text-align: left;">
Nom_2
</th>
<th style="text-align: left;">
Carrière &amp; Parentèle.relationship
</th>
<th style="text-align: left;">
z.h.added
</th>
<th style="text-align: left;">
z.h.citeAs
</th>
<th style="text-align: left;">
z.h.modified
</th>
<th style="text-align: left;">
z.h.reversePointer
</th>
<th style="text-align: left;">
z.h.workgroup
</th>
<th style="text-align: left;">
z.h.visibility
</th>
<th style="text-align: left;">
z.h.visnote
</th>
<th style="text-align: left;">
z.h.workgroup.id
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
47
</td>
<td style="text-align: left;">
Lou Ragan (invalid temporal object) Male
</td>
<td style="text-align: left;">
Ragan
</td>
<td style="text-align: left;">
Lou
</td>
<td style="text-align: left;">
Male
</td>
<td style="text-align: left;">
Printemps 1960
</td>
<td style="text-align: left;">
Not indexed
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
point
</td>
<td style="text-align: left;">
POINT(-0.880135 47.061729)
</td>
<td style="text-align: right;">
28
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
64 // 74 // 99
</td>
<td style="text-align: left;">
2023-01-19 13:49:25
</td>
<td style="text-align: left;">
<a href="https://heurist.huma-num.fr/heurist/?recID=47&amp;db=aliet_test_R" class="external-link uri">https://heurist.huma-num.fr/heurist/?recID=47&amp;db=aliet_test_R</a>
</td>
<td style="text-align: left;">
2023-11-10 09:09:20
</td>
<td style="text-align: left;">
61 // 73
</td>
<td style="text-align: left;">
alietteroux
</td>
<td style="text-align: left;">
viewable
</td>
<td style="text-align: left;">
logged in users
</td>
<td style="text-align: left;">
2
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
59
</td>
<td style="text-align: left;">
Sandra Lacouverture (1987) Female
</td>
<td style="text-align: left;">
Lacouverture
</td>
<td style="text-align: left;">
Sandra
</td>
<td style="text-align: left;">
Female
</td>
<td style="text-align: left;">
1987
</td>
<td style="text-align: left;">
Other Date
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
1987
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
point
</td>
<td style="text-align: left;">
POINT(-1.152043 46.159113)
</td>
<td style="text-align: right;">
16
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
109 // 71
</td>
<td style="text-align: left;">
2023-01-19 14:13:59
</td>
<td style="text-align: left;">
<a href="https://heurist.huma-num.fr/heurist/?recID=59&amp;db=aliet_test_R" class="external-link uri">https://heurist.huma-num.fr/heurist/?recID=59&amp;db=aliet_test_R</a>
</td>
<td style="text-align: left;">
2023-11-10 14:34:22
</td>
<td style="text-align: left;">
114 // 69 // 75
</td>
<td style="text-align: left;">
public
</td>
<td style="text-align: left;">
viewable
</td>
<td style="text-align: left;">
logged in users
</td>
<td style="text-align: left;">
0
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
60
</td>
<td style="text-align: left;">
Edgar Letracteur (3 Apr 1985) Male
</td>
<td style="text-align: left;">
Letracteur
</td>
<td style="text-align: left;">
Edgar
</td>
<td style="text-align: left;">
Male
</td>
<td style="text-align: left;">
{“timestamp”:{“in”:“1985-04-03”,“type”:“s”},“determination”:“1”,“comment”:“1985-04-03”,“estMinDate”:1985.0403,“estMaxDate”:1985.0403}
</td>
<td style="text-align: left;">
Simple Date
</td>
<td style="text-align: left;">
1985-04-03
</td>
<td style="text-align: left;">
1985
</td>
<td style="text-align: left;">
04
</td>
<td style="text-align: left;">
03
</td>
<td style="text-align: left;">
1985-04-03
</td>
<td style="text-align: left;">
Attested
</td>
<td style="text-align: left;">
point
</td>
<td style="text-align: left;">
POINT(-4.486009 48.390528)
</td>
<td style="text-align: right;">
8
</td>
<td style="text-align: left;">
Edgar Letracteur
</td>
<td style="text-align: left;">
63 // 99
</td>
<td style="text-align: left;">
2023-01-19 14:14:54
</td>
<td style="text-align: left;">
<a href="https://heurist.huma-num.fr/heurist/?recID=60&amp;db=aliet_test_R" class="external-link uri">https://heurist.huma-num.fr/heurist/?recID=60&amp;db=aliet_test_R</a>
</td>
<td style="text-align: left;">
2023-11-10 08:23:25
</td>
<td style="text-align: left;">
61 // 69
</td>
<td style="text-align: left;">
public
</td>
<td style="text-align: left;">
viewable
</td>
<td style="text-align: left;">
logged in users
</td>
<td style="text-align: left;">
0
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
77
</td>
<td style="text-align: left;">
Gérard Manvussa (20 Jan 1971) Male
</td>
<td style="text-align: left;">
Manvussa
</td>
<td style="text-align: left;">
Gérard
</td>
<td style="text-align: left;">
Male
</td>
<td style="text-align: left;">
{“timestamp”:{“in”:“1971-01-20”,“type”:“s”},“comment”:“1971-01-20”,“estMinDate”:1971.012,“estMaxDate”:1971.012}
</td>
<td style="text-align: left;">
Simple Date
</td>
<td style="text-align: left;">
1971-01-20
</td>
<td style="text-align: left;">
1971
</td>
<td style="text-align: left;">
01
</td>
<td style="text-align: left;">
20
</td>
<td style="text-align: left;">
1971-01-20
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
point
</td>
<td style="text-align: left;">
POINT(-86.851047 21.161785)
</td>
<td style="text-align: right;">
15
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
112 // 78
</td>
<td style="text-align: left;">
2023-01-23 07:55:53
</td>
<td style="text-align: left;">
<a href="https://heurist.huma-num.fr/heurist/?recID=77&amp;db=aliet_test_R" class="external-link uri">https://heurist.huma-num.fr/heurist/?recID=77&amp;db=aliet_test_R</a>
</td>
<td style="text-align: left;">
2023-11-10 08:25:33
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
public
</td>
<td style="text-align: left;">
viewable
</td>
<td style="text-align: left;">
logged in users
</td>
<td style="text-align: left;">
0
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
111
</td>
<td style="text-align: left;">
Jade Or (1976) Female
</td>
<td style="text-align: left;">
Or
</td>
<td style="text-align: left;">
Jade
</td>
<td style="text-align: left;">
Female
</td>
<td style="text-align: left;">
1976
</td>
<td style="text-align: left;">
Other Date
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
1976
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
point
</td>
<td style="text-align: left;">
POINT(-1.164559 46.455595)
</td>
<td style="text-align: right;">
20
</td>
<td style="text-align: left;">
Jade Or
</td>
<td style="text-align: left;">
112 // 113
</td>
<td style="text-align: left;">
2023-02-20 07:20:01
</td>
<td style="text-align: left;">
<a href="https://heurist.huma-num.fr/heurist/?recID=111&amp;db=aliet_test_R" class="external-link uri">https://heurist.huma-num.fr/heurist/?recID=111&amp;db=aliet_test_R</a>
</td>
<td style="text-align: left;">
2023-02-23 05:55:40
</td>
<td style="text-align: left;">
114
</td>
<td style="text-align: left;">
public
</td>
<td style="text-align: left;">
viewable
</td>
<td style="text-align: left;">
logged in users
</td>
<td style="text-align: left;">
0
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
131
</td>
<td style="text-align: left;">
Paul Ochon (22 Jul 1975) Male
</td>
<td style="text-align: left;">
Ochon
</td>
<td style="text-align: left;">
Paul
</td>
<td style="text-align: left;">
Male
</td>
<td style="text-align: left;">
1975-07-22
</td>
<td style="text-align: left;">
Other Date
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
1975
</td>
<td style="text-align: left;">
7
</td>
<td style="text-align: left;">
22
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
point
</td>
<td style="text-align: left;">
POINT(-1.413543 46.673118)
</td>
<td style="text-align: right;">
19
</td>
<td style="text-align: left;">
Paul Ochon
</td>
<td style="text-align: left;">
132
</td>
<td style="text-align: left;">
2023-02-20 09:21:12
</td>
<td style="text-align: left;">
<a href="https://heurist.huma-num.fr/heurist/?recID=131&amp;db=aliet_test_R" class="external-link uri">https://heurist.huma-num.fr/heurist/?recID=131&amp;db=aliet_test_R</a>
</td>
<td style="text-align: left;">
2023-02-23 05:55:18
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
public
</td>
<td style="text-align: left;">
viewable
</td>
<td style="text-align: left;">
logged in users
</td>
<td style="text-align: left;">
0
</td>
</tr>
</tbody>
</table>
<p>Rows are ordered according to the column starting with “z.h.id.”. These numbers match records IDs automatically created by Heurist ; they depend on the date added.</p>
<p>We look at column names and formats :</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">colname=</span><span class="fu">names</span>(Personne),</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">format=</span><span class="fu">as.character</span>(<span class="fu">sapply</span>(Personne, class))) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
colname
</th>
<th style="text-align: left;">
format
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
z.h.id.Personne
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
z.h.title.Personne
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Nom_1
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Prénom
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Sexe
</td>
<td style="text-align: left;">
factor
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Date de naissance.temporal.raw
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Date de naissance.temporal.type
</td>
<td style="text-align: left;">
factor
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Date de naissance.DAT.raw
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Date de naissance.DAT.year
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Date de naissance.DAT.month
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Date de naissance.DAT.day
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Date de naissance.property.COM
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Date de naissance.property.DET
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Lieu de naissance.geo.type
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Lieu de naissance.geo.wkt
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Nombre de publications
</td>
<td style="text-align: left;">
numeric
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Nom_2
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Carrière &amp; Parentèle.relationship
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
z.h.added
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
z.h.citeAs
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
z.h.modified
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
z.h.reversePointer
</td>
<td style="text-align: left;">
character
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
z.h.workgroup
</td>
<td style="text-align: left;">
factor
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
z.h.visibility
</td>
<td style="text-align: left;">
factor
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
z.h.visnote
</td>
<td style="text-align: left;">
factor
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
z.h.workgroup.id
</td>
<td style="text-align: left;">
factor
</td>
</tr>
</tbody>
</table>
<p>Note that :</p>
<ul>
<li><p>Each dataframe contains <strong>“paradata” fields : fields starting with “z.h.”</strong>. The column starting with “z.h.title” corresponds to “Heurist title masks”.</p></li>
<li><p><strong>Colnames are “display fields names” in Heurist forms</strong> (and not database fields names). Therefore, some columns may have the same name : it’s possible if the contributor has renamed an existing field with a name already present in the database (like “Nom” in our example). In such cases, <em>hr_import()</em> automatically adds a position number to those names (see <em>Nom_1</em> and <em>Nom_2</em> in our example).</p></li>
<li><p><em>Temporal</em>, <em>spatial</em> and <em>file</em> fields are declined to several columns : see below, part “Dealing with <em>temporal</em>, <em>spatial</em> and <em>file</em> fields”.</p></li>
<li>
<p>All columns are <strong>character</strong>, except :</p>
<ul>
<li>some paradata fields (<em>z.h.visibility</em>, <em>z.h.visnote</em>, <em>z.h.workgroup</em>, <em>z.h.workgroup.id</em>) : <strong>factor</strong>
</li>
<li>fields of type “enum” or “relationtype” (see the column <em>field.type</em> of the dataframe <em>z.h.tables.fields</em>) when they are not “repeatable” (see the column <em>field.MaxValues</em> of the dataframe <em>z.h.tables.fields</em>) : <strong>factor</strong> (like <em>Sexe</em> in our example)</li>
<li>fields ending by “.temporal.type”, describing records values of <em>spatial</em> fields : <strong>factor</strong>
</li>
<li>fields of type “float” (see the column <em>field.type</em> of the dataframe <em>z.h.tables.fields</em>) when they are not “repeatable” (see the column <em>field.MaxValues</em> of the dataframe <em>z.h.tables.fields</em>) : <strong>numeric</strong> (like <em>Nombre de publications</em> in our example).</li>
</ul>
</li>
</ul>
<p>Then, we’re abble to know levels of “enum” fields ; and to perform arithmetic on “float” fields :</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(Personne<span class="sc">$</span>Sexe)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Female" "Male"</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Personne<span class="sc">$</span><span class="st">`</span><span class="at">Nombre de publications</span><span class="st">`</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    8.00   15.25   17.50   17.67   19.75   28.00</span></span></code></pre></div>
<p> </p>
</div>
<div class="section level2">
<h2 id="dealing-with-repeatable-fields-multiple-values-in-a-field-for-one-record">Dealing with “repeatable” fields (multiple values in a field for one record)<a class="anchor" aria-label="anchor" href="#dealing-with-repeatable-fields-multiple-values-in-a-field-for-one-record"></a>
</h2>
<p>“Repetable” fields match a value not equal to 1 in the column <em>field.MaxValues</em> of the dataframe <em>z.h.tables.fields</em>. Let’s have a look to “repeatable” fields of tables <em>Laboratoire</em>,<em>Objet</em> and <em>Personne</em> :</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>z.h.tables.fields <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(table.name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Laboratoire"</span>,<span class="st">"Objet"</span>,<span class="st">"Personne"</span>) <span class="sc">&amp;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>           field.MaxValues<span class="sc">!=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(table.name,field.DisplayName,field.type) <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
table.name
</th>
<th style="text-align: left;">
field.DisplayName
</th>
<th style="text-align: left;">
field.type
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Laboratoire
</td>
<td style="text-align: left;">
Membres
</td>
<td style="text-align: left;">
relmarker
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Laboratoire
</td>
<td style="text-align: left;">
Discipline(s)
</td>
<td style="text-align: left;">
enum
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Découvreur(s)
</td>
<td style="text-align: left;">
resource
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Expositions
</td>
<td style="text-align: left;">
resource
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Personne
</td>
<td style="text-align: left;">
Carrière
</td>
<td style="text-align: left;">
relmarker
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Personne
</td>
<td style="text-align: left;">
Parentèle
</td>
<td style="text-align: left;">
relmarker
</td>
</tr>
</tbody>
</table>
<p>As the column <em>Discipline(s)</em> of the table <em>Laboratoire</em> appears to be a “repeatable” field, we have a look to its records :</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>Laboratoire <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(z.h.title.Laboratoire,<span class="st">`</span><span class="at">Discipline(s)</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 55%">
<col style="width: 44%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
z.h.title.Laboratoire
</th>
<th style="text-align: left;">
Discipline(s)
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
LRO - Laboratoire de Recherche d’Objets
</td>
<td style="text-align: left;">
Archaeology
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
IAO - Institut Afficionados d’Objets
</td>
<td style="text-align: left;">
Archaeology // Computer Science
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
OT - Objets Toujours
</td>
<td style="text-align: left;">
Archaeology
</td>
</tr>
</tbody>
</table>
<p>Usign <em>hr_import()</em>, all different values of a “repeatable” field for one record are separated by ” // “.</p>
<p>We can count records in two different ways :</p>
<ul>
<li>looking at combinations of terms (see option A below) ;</li>
<li>looking at terms only (see option B below) : in this case, we use the <em>separate_rows()</em> function of <em>tidyr</em>.</li>
</ul>
<!-- --><div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Option A</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>Laboratoire <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Discipline(s)</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
Discipline(s)
</th>
<th style="text-align: right;">
n
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Archaeology
</td>
<td style="text-align: right;">
2
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Archaeology // Computer Science
</td>
<td style="text-align: right;">
1
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Option B</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>Laboratoire <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(<span class="st">`</span><span class="at">Discipline(s)</span><span class="st">`</span>,<span class="at">sep=</span> <span class="st">" // "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Discipline(s)</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
Discipline(s)
</th>
<th style="text-align: right;">
n
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Archaeology
</td>
<td style="text-align: right;">
3
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Computer Science
</td>
<td style="text-align: right;">
1
</td>
</tr>
</tbody>
</table>
<p>We also use <em>separate_rows()</em> if we’d like to know which objects have been discovered by the different researchers (table <em>Personne.Objet</em>). Then, we’re abble to count discovered objects per researcher.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>Objet <span class="sc">%&gt;%</span> <span class="fu">select</span>(z.h.id.Objet,<span class="st">`</span><span class="at">Découvreur(s)</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
z.h.id.Objet
</th>
<th style="text-align: left;">
Découvreur(s)
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
61
</td>
<td style="text-align: left;">
47 // 60
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
69
</td>
<td style="text-align: left;">
59 // 60
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
73
</td>
<td style="text-align: left;">
47
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
75
</td>
<td style="text-align: left;">
59
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
114
</td>
<td style="text-align: left;">
111 // 59
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb12"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>Personne.Objet <span class="ot">&lt;-</span> Personne <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(z.h.id.Personne,z.h.title.Personne) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(Objet <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(z.h.id.Objet,<span class="st">`</span><span class="at">Découvreur(s)</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>              <span class="fu">separate_rows</span>(<span class="st">`</span><span class="at">Découvreur(s)</span><span class="st">`</span>,<span class="at">sep=</span><span class="st">" // "</span>),</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">by=</span><span class="fu">c</span>(<span class="st">"z.h.id.Personne"</span><span class="ot">=</span><span class="st">"Découvreur(s)"</span>))</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>Personne.Objet <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 22%">
<col style="width: 58%">
<col style="width: 18%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
z.h.id.Personne
</th>
<th style="text-align: left;">
z.h.title.Personne
</th>
<th style="text-align: left;">
z.h.id.Objet
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
47
</td>
<td style="text-align: left;">
Lou Ragan (invalid temporal object) Male
</td>
<td style="text-align: left;">
61
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
47
</td>
<td style="text-align: left;">
Lou Ragan (invalid temporal object) Male
</td>
<td style="text-align: left;">
73
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
59
</td>
<td style="text-align: left;">
Sandra Lacouverture (1987) Female
</td>
<td style="text-align: left;">
69
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
59
</td>
<td style="text-align: left;">
Sandra Lacouverture (1987) Female
</td>
<td style="text-align: left;">
75
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
59
</td>
<td style="text-align: left;">
Sandra Lacouverture (1987) Female
</td>
<td style="text-align: left;">
114
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
60
</td>
<td style="text-align: left;">
Edgar Letracteur (3 Apr 1985) Male
</td>
<td style="text-align: left;">
61
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
60
</td>
<td style="text-align: left;">
Edgar Letracteur (3 Apr 1985) Male
</td>
<td style="text-align: left;">
69
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
77
</td>
<td style="text-align: left;">
Gérard Manvussa (20 Jan 1971) Male
</td>
<td style="text-align: left;">
NA
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
111
</td>
<td style="text-align: left;">
Jade Or (1976) Female
</td>
<td style="text-align: left;">
114
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
131
</td>
<td style="text-align: left;">
Paul Ochon (22 Jul 1975) Male
</td>
<td style="text-align: left;">
NA
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>Personne.Objet <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(z.h.title.Personne) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nb.objets=</span><span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(z.h.id.Objet))) <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(nb.objets)) <span class="sc">%&gt;%</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
z.h.title.Personne
</th>
<th style="text-align: right;">
nb.objets
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Sandra Lacouverture (1987) Female
</td>
<td style="text-align: right;">
3
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Edgar Letracteur (3 Apr 1985) Male
</td>
<td style="text-align: right;">
2
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Lou Ragan (invalid temporal object) Male
</td>
<td style="text-align: right;">
2
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Jade Or (1976) Female
</td>
<td style="text-align: right;">
1
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Gérard Manvussa (20 Jan 1971) Male
</td>
<td style="text-align: right;">
0
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Paul Ochon (22 Jul 1975) Male
</td>
<td style="text-align: right;">
0
</td>
</tr>
</tbody>
</table>
<p> </p>
</div>
<div class="section level2">
<h2 id="columns-zhreversepointer">Columns “z.h.reversePointer”<a class="anchor" aria-label="anchor" href="#columns-zhreversepointer"></a>
</h2>
<p>Since 2023, it has been being <strong><em>z.h.reversePointer</em></strong> columns in “target dataframes”. These columns report IDs of related entities. There are two types of “target dataframes” :</p>
<ul>
<li>“target dataframes” corresponding to <strong><em>resource fields</em></strong> ;</li>
<li>“target dataframes” corresponding to <strong><em>children records</em></strong>.</li>
</ul>
<div class="section level3">
<h3 id="target-dataframes-corresponding-to-resource-fields">“Target dataframes” corresponding to <em>resource fields</em>
<a class="anchor" aria-label="anchor" href="#target-dataframes-corresponding-to-resource-fields"></a>
</h3>
<p>In our example, there are 7 Heurist’<em>fields</em> of type <em>resource</em> : in Heurist’environment, each of them is of type ‘<em>Record pointer</em>’. For example :</p>
<ul>
<li>field <em>Lieu de la trouvaille</em> (table <em>Objet</em>) → table <em>Place</em> (target)</li>
<li>field <em>Découvreur(s)</em> (table <em>Objet</em>) → table <em>Personne</em> (target)</li>
</ul>
<!-- --><div class="sourceCode" id="cb14"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>z.h.tables.fields <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(field.type<span class="sc">==</span><span class="st">"resource"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(table.name,field.DisplayName,field.type) <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
table.name
</th>
<th style="text-align: left;">
field.DisplayName
</th>
<th style="text-align: left;">
field.type
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Lieu de la trouvaille
</td>
<td style="text-align: left;">
resource
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Découvreur(s)
</td>
<td style="text-align: left;">
resource
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Expositions
</td>
<td style="text-align: left;">
resource
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Objet - Exposition
</td>
<td style="text-align: left;">
Place
</td>
<td style="text-align: left;">
resource
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Record relationship
</td>
<td style="text-align: left;">
Target record
</td>
<td style="text-align: left;">
resource
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Record relationship
</td>
<td style="text-align: left;">
Source record
</td>
<td style="text-align: left;">
resource
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Record relationship
</td>
<td style="text-align: left;">
Interpretation / commentary &gt;
</td>
<td style="text-align: left;">
resource
</td>
</tr>
</tbody>
</table>
<p>Then (for example), the dataframe <em>Personne</em> contains a <em>z.h.reversePointer</em> listing discovered objects. <em>Lou Ragan</em> has discovered two objects : ID-61 and ID-73 ; et l’objet ID-69 a été découvert par <em>Sandra Lacouverture</em> et <em>Edgar Letracteur</em> (see below).</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>Personne <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(z.h.id.Personne,z.h.title.Personne,z.h.reversePointer) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 21%">
<col style="width: 53%">
<col style="width: 25%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
z.h.id.Personne
</th>
<th style="text-align: left;">
z.h.title.Personne
</th>
<th style="text-align: left;">
z.h.reversePointer
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
47
</td>
<td style="text-align: left;">
Lou Ragan (invalid temporal object) Male
</td>
<td style="text-align: left;">
61 // 73
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
59
</td>
<td style="text-align: left;">
Sandra Lacouverture (1987) Female
</td>
<td style="text-align: left;">
114 // 69 // 75
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
60
</td>
<td style="text-align: left;">
Edgar Letracteur (3 Apr 1985) Male
</td>
<td style="text-align: left;">
61 // 69
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
77
</td>
<td style="text-align: left;">
Gérard Manvussa (20 Jan 1971) Male
</td>
<td style="text-align: left;">
NA
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
111
</td>
<td style="text-align: left;">
Jade Or (1976) Female
</td>
<td style="text-align: left;">
114
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
131
</td>
<td style="text-align: left;">
Paul Ochon (22 Jul 1975) Male
</td>
<td style="text-align: left;">
NA
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb16"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>Objet <span class="sc">%&gt;%</span> <span class="fu">select</span>(z.h.id.Objet,z.h.title.Objet,<span class="st">`</span><span class="at">Découvreur(s)</span><span class="st">`</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col style="width: 10%">
<col style="width: 79%">
<col style="width: 10%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
z.h.id.Objet
</th>
<th style="text-align: left;">
z.h.title.Objet
</th>
<th style="text-align: left;">
Découvreur(s)
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
61
</td>
<td style="text-align: left;">
Utilitaires.Cuisine.Ustensiles (3000 BCE ±500 years) Trouvé le 3 May 2015 à Beaulieu, Mareuil-sur-Lay
</td>
<td style="text-align: left;">
47 // 60
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
69
</td>
<td style="text-align: left;">
Décoratifs (1700 to 1800) Trouvé le 15 Jan 2015 à Bois des Girondins, La Roche-sur-Yon
</td>
<td style="text-align: left;">
59 // 60
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
73
</td>
<td style="text-align: left;">
Utilitaires.Jardinage (50 BCE-200 years +100 years) Trouvé le 15 Oct 2012 à Beaulieu, Mareuil-sur-Lay
</td>
<td style="text-align: left;">
47
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
75
</td>
<td style="text-align: left;">
Utilitaires (1900 ±20 years) Trouvé le 2019 à Estuaire du Lay, Vendée
</td>
<td style="text-align: left;">
59
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
114
</td>
<td style="text-align: left;">
Utilitaires.Cuisine.Récipients (1700 BCE ±100 years) Trouvé le 5 Feb 2020 à Estuaire du Lay, Vendée
</td>
<td style="text-align: left;">
111 // 59
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="target-dataframes-corresponding-to-children-records">“Target dataframes” corresponding to <em>children records</em>
<a class="anchor" aria-label="anchor" href="#target-dataframes-corresponding-to-children-records"></a>
</h3>
<p>A type of information hasn’t been well traced yet by the <em>HeuristToR</em> package : it’s not so easy to recover <em>“children” fields</em> ! In our example, the dataframe “<em>Objet - Exposition</em>” gathers “children” of the field <em>Expositions</em> (table <em>Objet</em>). Therefore, the dataframe “<em>Objet - Exposition</em>” contains a <em>z.h.reversePointer</em> listing “parents”’objects. The column <em>z.h.reversePointer</em> of a “child” dataframe is necessarily <strong>not</strong> “repeatable”.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>Objet <span class="sc">%&gt;%</span> <span class="fu">select</span>(z.h.id.Objet,Expositions) <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
z.h.id.Objet
</th>
<th style="text-align: left;">
Expositions
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
61
</td>
<td style="text-align: left;">
65 // 67
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
69
</td>
<td style="text-align: left;">
72
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
73
</td>
<td style="text-align: left;">
NA
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
75
</td>
<td style="text-align: left;">
NA
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
114
</td>
<td style="text-align: left;">
116
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb18"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">Objet - Exposition</span><span class="st">`</span> <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="st">`</span><span class="at">z.h.id.Objet - Exposition</span><span class="st">`</span>,z.h.reversePointer) <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
z.h.id.Objet - Exposition
</th>
<th style="text-align: left;">
z.h.reversePointer
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
65
</td>
<td style="text-align: left;">
61
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
67
</td>
<td style="text-align: left;">
61
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
72
</td>
<td style="text-align: left;">
69
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
116
</td>
<td style="text-align: left;">
114
</td>
</tr>
</tbody>
</table>
<p> </p>
</div>
</div>
<div class="section level2">
<h2 id="gathering-terms-in-a-vocabulary">Gathering terms in a vocabulary<a class="anchor" aria-label="anchor" href="#gathering-terms-in-a-vocabulary"></a>
</h2>
<p>“Terms list” fields match a value “<em>enum</em>” in the column <em>field.type</em> of the dataframe <em>z.h.tables.fields</em>. To have a look at only informed fields (and not empty fields), we select only fields matching a value “<em>no empty</em>” in the column <em>field.empty</em> of <em>z.h.tables.fields</em>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>z.h.tables.fields <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(field.type<span class="sc">==</span><span class="st">"enum"</span> <span class="sc">&amp;</span> field.empty<span class="sc">==</span><span class="st">"no empty"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(table.name,field.DisplayName,field.type) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
table.name
</th>
<th style="text-align: left;">
field.DisplayName
</th>
<th style="text-align: left;">
field.type
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Laboratoire
</td>
<td style="text-align: left;">
Discipline(s)
</td>
<td style="text-align: left;">
enum
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Type d’objet
</td>
<td style="text-align: left;">
enum
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Personne
</td>
<td style="text-align: left;">
Sexe
</td>
<td style="text-align: left;">
enum
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Place
</td>
<td style="text-align: left;">
Place type
</td>
<td style="text-align: left;">
enum
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Place
</td>
<td style="text-align: left;">
Locational certainty
</td>
<td style="text-align: left;">
enum
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Place
</td>
<td style="text-align: left;">
Country
</td>
<td style="text-align: left;">
enum
</td>
</tr>
</tbody>
</table>
<p>As the column <em>Type d’objet</em> of the table <em>Objet</em> appears to be a “terms list” field, we count records per term :</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>Objet <span class="sc">%&gt;%</span> <span class="fu">count</span>(<span class="st">`</span><span class="at">Type d'objet</span><span class="st">`</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
Type d’objet
</th>
<th style="text-align: right;">
n
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Décoratifs
</td>
<td style="text-align: right;">
1
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Jardinage
</td>
<td style="text-align: right;">
1
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Récipients
</td>
<td style="text-align: right;">
1
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Ustensiles
</td>
<td style="text-align: right;">
1
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Utilitaires
</td>
<td style="text-align: right;">
1
</td>
</tr>
</tbody>
</table>
<p>Actually, these terms are nested. To have a look to this vocabulary structure (or “tree”), we select rows of <em>z.h.vocabularies</em> for which <em>field.JsonTermIDTree</em> is the one of the field “Type d’objet” described in <em>z.h.tables.fields</em>.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>voc <span class="ot">&lt;-</span> z.h.vocabularies <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">semi_join</span>(z.h.tables.fields <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(field.DisplayName<span class="sc">==</span><span class="st">"Type d'objet"</span>),</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">by=</span><span class="st">"field.JsonTermIDTree"</span>) </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>voc <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 6%">
<col style="width: 2%">
<col style="width: 6%">
<col style="width: 16%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 5%">
<col style="width: 5%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
field.JsonTermIDTree
</th>
<th style="text-align: left;">
trm_ID
</th>
<th style="text-align: left;">
trm_Label
</th>
<th style="text-align: left;">
trm_Label_long
</th>
<th style="text-align: left;">
trm_Domain
</th>
<th style="text-align: left;">
trm_ParentTermID
</th>
<th style="text-align: left;">
trm_InverseTermId
</th>
<th style="text-align: left;">
trm_InverseLabel
</th>
<th style="text-align: right;">
Level
</th>
<th style="text-align: right;">
max.Level
</th>
<th style="text-align: left;">
Level1
</th>
<th style="text-align: left;">
Level2
</th>
<th style="text-align: left;">
Level3
</th>
<th style="text-align: left;">
Level4
</th>
<th style="text-align: left;">
InvLevel1
</th>
<th style="text-align: left;">
InvLevel2
</th>
<th style="text-align: left;">
InvLevel3
</th>
<th style="text-align: left;">
InvLevel4
</th>
<th style="text-align: left;">
trm_Modified.Date
</th>
<th style="text-align: left;">
trm_Modified.Hour
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
9465
</td>
<td style="text-align: left;">
9465
</td>
<td style="text-align: left;">
Types d’objets vocab
</td>
<td style="text-align: left;">
Types d’objets vocab
</td>
<td style="text-align: left;">
enum
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: right;">
1
</td>
<td style="text-align: right;">
4
</td>
<td style="text-align: left;">
Types d’objets vocab
</td>
<td style="text-align: left;">
Types d’objets vocab
</td>
<td style="text-align: left;">
Types d’objets vocab
</td>
<td style="text-align: left;">
Types d’objets vocab
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
2023-01-19
</td>
<td style="text-align: left;">
14:46
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
9465
</td>
<td style="text-align: left;">
9522
</td>
<td style="text-align: left;">
Décoratifs
</td>
<td style="text-align: left;">
Types d’objets vocab / Décoratifs
</td>
<td style="text-align: left;">
enum
</td>
<td style="text-align: left;">
9465
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: right;">
2
</td>
<td style="text-align: right;">
4
</td>
<td style="text-align: left;">
Types d’objets vocab
</td>
<td style="text-align: left;">
Décoratifs
</td>
<td style="text-align: left;">
Décoratifs
</td>
<td style="text-align: left;">
Décoratifs
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
2023-01-19
</td>
<td style="text-align: left;">
14:44
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
9465
</td>
<td style="text-align: left;">
9521
</td>
<td style="text-align: left;">
Utilitaires
</td>
<td style="text-align: left;">
Types d’objets vocab / Utilitaires
</td>
<td style="text-align: left;">
enum
</td>
<td style="text-align: left;">
9465
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: right;">
2
</td>
<td style="text-align: right;">
4
</td>
<td style="text-align: left;">
Types d’objets vocab
</td>
<td style="text-align: left;">
Utilitaires
</td>
<td style="text-align: left;">
Utilitaires
</td>
<td style="text-align: left;">
Utilitaires
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
2023-01-19
</td>
<td style="text-align: left;">
14:44
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
9465
</td>
<td style="text-align: left;">
9524
</td>
<td style="text-align: left;">
Bricolage
</td>
<td style="text-align: left;">
Types d’objets vocab / Utilitaires / Bricolage
</td>
<td style="text-align: left;">
enum
</td>
<td style="text-align: left;">
9521
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: right;">
3
</td>
<td style="text-align: right;">
4
</td>
<td style="text-align: left;">
Types d’objets vocab
</td>
<td style="text-align: left;">
Utilitaires
</td>
<td style="text-align: left;">
Bricolage
</td>
<td style="text-align: left;">
Bricolage
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
2023-01-19
</td>
<td style="text-align: left;">
13:46
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
9465
</td>
<td style="text-align: left;">
9523
</td>
<td style="text-align: left;">
Cuisine
</td>
<td style="text-align: left;">
Types d’objets vocab / Utilitaires / Cuisine
</td>
<td style="text-align: left;">
enum
</td>
<td style="text-align: left;">
9521
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: right;">
3
</td>
<td style="text-align: right;">
4
</td>
<td style="text-align: left;">
Types d’objets vocab
</td>
<td style="text-align: left;">
Utilitaires
</td>
<td style="text-align: left;">
Cuisine
</td>
<td style="text-align: left;">
Cuisine
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
2023-01-19
</td>
<td style="text-align: left;">
13:46
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
9465
</td>
<td style="text-align: left;">
9526
</td>
<td style="text-align: left;">
Récipients
</td>
<td style="text-align: left;">
Types d’objets vocab / Utilitaires / Cuisine / Récipients
</td>
<td style="text-align: left;">
enum
</td>
<td style="text-align: left;">
9523
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: right;">
4
</td>
<td style="text-align: right;">
4
</td>
<td style="text-align: left;">
Types d’objets vocab
</td>
<td style="text-align: left;">
Utilitaires
</td>
<td style="text-align: left;">
Cuisine
</td>
<td style="text-align: left;">
Récipients
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
2023-01-19
</td>
<td style="text-align: left;">
13:46
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
9465
</td>
<td style="text-align: left;">
9527
</td>
<td style="text-align: left;">
Ustensiles
</td>
<td style="text-align: left;">
Types d’objets vocab / Utilitaires / Cuisine / Ustensiles
</td>
<td style="text-align: left;">
enum
</td>
<td style="text-align: left;">
9523
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: right;">
4
</td>
<td style="text-align: right;">
4
</td>
<td style="text-align: left;">
Types d’objets vocab
</td>
<td style="text-align: left;">
Utilitaires
</td>
<td style="text-align: left;">
Cuisine
</td>
<td style="text-align: left;">
Ustensiles
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
2023-01-19
</td>
<td style="text-align: left;">
13:46
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
9465
</td>
<td style="text-align: left;">
9525
</td>
<td style="text-align: left;">
Jardinage
</td>
<td style="text-align: left;">
Types d’objets vocab / Utilitaires / Jardinage
</td>
<td style="text-align: left;">
enum
</td>
<td style="text-align: left;">
9521
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: right;">
3
</td>
<td style="text-align: right;">
4
</td>
<td style="text-align: left;">
Types d’objets vocab
</td>
<td style="text-align: left;">
Utilitaires
</td>
<td style="text-align: left;">
Jardinage
</td>
<td style="text-align: left;">
Jardinage
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
2023-01-19
</td>
<td style="text-align: left;">
13:46
</td>
</tr>
</tbody>
</table>
<p>We see this vocabulary is named “Type d’objets vocab” (see column <em>Level1</em>) and is composed of 4 levels (see column <em>maxLevel</em>).</p>
<p>In following lines, we gather terms to “Level3”, then “Level2”.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gathering to "Level 3"</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>Objet <span class="sc">%&gt;%</span> <span class="fu">count</span>(<span class="st">`</span><span class="at">Type d'objet</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(voc,<span class="at">by=</span><span class="fu">c</span>(<span class="st">"Type d'objet"</span><span class="ot">=</span><span class="st">"trm_Label"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Level3) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">nb=</span><span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
Level3
</th>
<th style="text-align: right;">
nb
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Cuisine
</td>
<td style="text-align: right;">
2
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Décoratifs
</td>
<td style="text-align: right;">
1
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Jardinage
</td>
<td style="text-align: right;">
1
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Utilitaires
</td>
<td style="text-align: right;">
1
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb23"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gathering to "Level 2"</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>Objet <span class="sc">%&gt;%</span> <span class="fu">count</span>(<span class="st">`</span><span class="at">Type d'objet</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(voc,<span class="at">by=</span><span class="fu">c</span>(<span class="st">"Type d'objet"</span><span class="ot">=</span><span class="st">"trm_Label"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Level2) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">nb=</span><span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
Level2
</th>
<th style="text-align: right;">
nb
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Décoratifs
</td>
<td style="text-align: right;">
1
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Utilitaires
</td>
<td style="text-align: right;">
4
</td>
</tr>
</tbody>
</table>
<p> </p>
</div>
<div class="section level2">
<h2 id="dealing-with-record-relationship">Dealing with “Record relationship”<a class="anchor" aria-label="anchor" href="#dealing-with-record-relationship"></a>
</h2>
<div class="section level3">
<h3 id="relationship-marker-fields">“Relationship marker” fields<a class="anchor" aria-label="anchor" href="#relationship-marker-fields"></a>
</h3>
<p>“Relationship marker” fields match a value “<em>relmarker</em>” in the column <em>field.type</em> of the dataframe <em>z.h.tables.fields</em>. Let’s have a look to “relation markers” used in this database :</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>z.h.tables.fields <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(field.type<span class="sc">==</span><span class="st">"relmarker"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(table.name,field.DisplayName,field.type) <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
table.name
</th>
<th style="text-align: left;">
field.DisplayName
</th>
<th style="text-align: left;">
field.type
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Laboratoire
</td>
<td style="text-align: left;">
Membres
</td>
<td style="text-align: left;">
relmarker
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Personne
</td>
<td style="text-align: left;">
Carrière
</td>
<td style="text-align: left;">
relmarker
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Personne
</td>
<td style="text-align: left;">
Parentèle
</td>
<td style="text-align: left;">
relmarker
</td>
</tr>
</tbody>
</table>
<p>We see that the contributor had created 2 “relationship marker” fields in “Personne” : this usage is not recommended because it may create problems while viewing records in Heurist. It’s not recommended, but it does exist !</p>
<p>In the XML data file, all values of “relationship marker” fields are only informed as “relationship” : we can recover the table it belongs to, but we can’t recover the field it belongs to (when 2 “relationship marker” fields have been created in a same “record type”).</p>
<p>Therefore, <em>hr_import()</em> function automatically creates one and unique “relationship marker” field in a table : this field match a column finishing by “<em>.relationship</em>”. Let’s have a look to the dataframe <em>Personne</em> :</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Personne)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "z.h.id.Personne"                   "z.h.title.Personne"               </span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3] "Nom_1"                             "Prénom"                           </span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5] "Sexe"                              "Date de naissance.temporal.raw"   </span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] "Date de naissance.temporal.type"   "Date de naissance.DAT.raw"        </span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9] "Date de naissance.DAT.year"        "Date de naissance.DAT.month"      </span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] "Date de naissance.DAT.day"         "Date de naissance.property.COM"   </span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] "Date de naissance.property.DET"    "Lieu de naissance.geo.type"       </span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15] "Lieu de naissance.geo.wkt"         "Nombre de publications"           </span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [17] "Nom_2"                             "Carrière &amp; Parentèle.relationship"</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [19] "z.h.added"                         "z.h.citeAs"                       </span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [21] "z.h.modified"                      "z.h.reversePointer"               </span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [23] "z.h.workgroup"                     "z.h.visibility"                   </span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [25] "z.h.visnote"                       "z.h.workgroup.id"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="relation-vocabularies">“Relation” vocabularies<a class="anchor" aria-label="anchor" href="#relation-vocabularies"></a>
</h3>
<p>“Relationship marker” fields necessarily use a vocabulary. Those vocabularies match a value “<em>relation</em>” in the column <em>trm_Domain</em> of the dataframe <em>z.h.vocabularies</em>. Let’s have a look to the different vocabularies (<em>Level1</em>) used in “relationship marker” fields :</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>z.h.vocabularies <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(trm_Domain<span class="sc">==</span><span class="st">"relation"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Level1) <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
Level1
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<ol start="0" style="list-style-type: decimal"><li>My relationships
</li></ol>
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
<ol start="4" style="list-style-type: decimal"><li>Family
</li></ol>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="record-relationship-dataframe">“Record relationship” dataframe<a class="anchor" aria-label="anchor" href="#record-relationship-dataframe"></a>
</h3>
<p>When a contributor informs a “relationship” via a “relationship marker” in Heurist, an inverse relation is automatically created in Heurist reports. But in the XML data file, it seems we can only recover recorded relations and not their inverses (it did in January 2023 ; I haven’t had time to ckeck it in November 2023).</p>
<p><em>hr_import()</em> duplicates each relationship of the original table : for each relationship from A to B, <em>hr_import()</em> automatically creates a relationship from B to A.</p>
<p>“Original” relationships and their “created” inverses can be distinguished by the column <em>z.h.original</em> of the dataframe <em>Record relationship</em>. Then, if you want uniquely treat “original” relationships, you can filter records on this column.</p>
<p>Let’s have a look to relationship records regarding family links (<em>Level1</em>==“<em>4. Family</em>”).</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">Record relationship</span><span class="st">`</span> <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(z.h.vocabularies <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>               <span class="fu">filter</span>(Level1<span class="sc">==</span><span class="st">"4. Family"</span>),</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">by=</span><span class="fu">c</span>(<span class="st">"Relationship type"</span><span class="ot">=</span><span class="st">"trm_Label"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">`</span><span class="at">z.h.id.Record relationship</span><span class="st">`</span>,<span class="st">`</span><span class="at">Source record</span><span class="st">`</span>,<span class="st">`</span><span class="at">Target record</span><span class="st">`</span>,<span class="st">`</span><span class="at">Relationship type</span><span class="st">`</span>,z.h.original) <span class="sc">%&gt;%</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 30%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 20%">
<col style="width: 17%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
z.h.id.Record relationship
</th>
<th style="text-align: left;">
Source record
</th>
<th style="text-align: left;">
Target record
</th>
<th style="text-align: left;">
Relationship type
</th>
<th style="text-align: left;">
z.h.original
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
112
</td>
<td style="text-align: left;">
111
</td>
<td style="text-align: left;">
77
</td>
<td style="text-align: left;">
IsSiblingOf
</td>
<td style="text-align: left;">
original
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
112
</td>
<td style="text-align: left;">
77
</td>
<td style="text-align: left;">
111
</td>
<td style="text-align: left;">
IsSiblingOf
</td>
<td style="text-align: left;">
adding rheurist
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
99
</td>
<td style="text-align: left;">
60
</td>
<td style="text-align: left;">
47
</td>
<td style="text-align: left;">
IsSonOf
</td>
<td style="text-align: left;">
original
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
99
</td>
<td style="text-align: left;">
47
</td>
<td style="text-align: left;">
60
</td>
<td style="text-align: left;">
IsParentOf
</td>
<td style="text-align: left;">
adding rheurist
</td>
</tr>
</tbody>
</table>
<p>We see that the contributor had informed “id-60 IsSonOf id-47” ; <em>hr_import()</em> function has automatically created its opposite (“id_47 IsParentOf id-60”), using inverse terms retrievable in <em>z.h.vocabularies</em>.</p>
<p>Let’s have a look to all relationships regarding “id-47” person :</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>Personne <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(z.h.id.Personne<span class="sc">==</span><span class="st">"47"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="st">`</span><span class="at">Record relationship</span><span class="st">`</span>,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">by=</span><span class="fu">c</span>(<span class="st">"z.h.id.Personne"</span><span class="ot">=</span><span class="st">"Source record"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(z.h.id.Personne,Nom_1,Prénom,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">z.h.id.Record relationship</span><span class="st">`</span>,<span class="st">`</span><span class="at">Relationship type</span><span class="st">`</span>,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Target record</span><span class="st">`</span>,z.h.original) <span class="sc">%&gt;%</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 15%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 17%">
<col style="width: 13%">
<col style="width: 15%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
z.h.id.Personne
</th>
<th style="text-align: left;">
Nom_1
</th>
<th style="text-align: left;">
Prénom
</th>
<th style="text-align: left;">
z.h.id.Record relationship
</th>
<th style="text-align: left;">
Relationship type
</th>
<th style="text-align: left;">
Target record
</th>
<th style="text-align: left;">
z.h.original
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
47
</td>
<td style="text-align: left;">
Ragan
</td>
<td style="text-align: left;">
Lou
</td>
<td style="text-align: left;">
64
</td>
<td style="text-align: left;">
est membre du
</td>
<td style="text-align: left;">
55
</td>
<td style="text-align: left;">
original
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
47
</td>
<td style="text-align: left;">
Ragan
</td>
<td style="text-align: left;">
Lou
</td>
<td style="text-align: left;">
74
</td>
<td style="text-align: left;">
est membre du
</td>
<td style="text-align: left;">
56
</td>
<td style="text-align: left;">
original
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
47
</td>
<td style="text-align: left;">
Ragan
</td>
<td style="text-align: left;">
Lou
</td>
<td style="text-align: left;">
99
</td>
<td style="text-align: left;">
IsParentOf
</td>
<td style="text-align: left;">
60
</td>
<td style="text-align: left;">
adding rheurist
</td>
</tr>
</tbody>
</table>
<p>We obtain 3 relationships : it matches content of the “relmarker” field of the dataframe <em>Personne</em> (column <em>Carrière &amp; Parentèle.relationship</em>).</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>Personne <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(z.h.id.Personne<span class="sc">==</span><span class="st">"47"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(z.h.id.Personne,<span class="st">`</span><span class="at">Carrière &amp; Parentèle.relationship</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
z.h.id.Personne
</th>
<th style="text-align: left;">
Carrière &amp; Parentèle.relationship
</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: left;">
47
</td>
<td style="text-align: left;">
64 // 74 // 99
</td>
</tr></tbody>
</table>
<p><strong>Please note</strong> : in the previous example, we’ve only used the column <em>z.h.id.Personne</em> of the dataframe <em>Personne</em>, and not the column <em>Carrière &amp; Parentèle.relationship</em> of the dataframe <em>Personne</em>. Indeed, if we had joined by this column, each relation would have been duplicated.</p>
<p> </p>
</div>
</div>
<div class="section level2">
<h2 id="dealing-with-place">Dealing with “Place”<a class="anchor" aria-label="anchor" href="#dealing-with-place"></a>
</h2>
<p>Since 2023, the dataframe <em>Place</em> (corresponding to the eponymous ‘record type’) has contained a column named <strong><em>z.h.reversePointer</em></strong>. This column reports ID of related entities.</p>
<p>For instance, let’s see where objects (dataframe <em>Objet</em>) have been found (field ‘<em>Lieu de la trouvaille</em>’ referring to <em>Place</em>) :</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>Objet <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(z.h.id.Objet,z.h.title.Objet,<span class="st">`</span><span class="at">Lieu de la trouvaille</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 9%">
<col style="width: 74%">
<col style="width: 16%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
z.h.id.Objet
</th>
<th style="text-align: left;">
z.h.title.Objet
</th>
<th style="text-align: left;">
Lieu de la trouvaille
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
61
</td>
<td style="text-align: left;">
Utilitaires.Cuisine.Ustensiles (3000 BCE ±500 years) Trouvé le 3 May 2015 à Beaulieu, Mareuil-sur-Lay
</td>
<td style="text-align: left;">
62
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
69
</td>
<td style="text-align: left;">
Décoratifs (1700 to 1800) Trouvé le 15 Jan 2015 à Bois des Girondins, La Roche-sur-Yon
</td>
<td style="text-align: left;">
70
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
73
</td>
<td style="text-align: left;">
Utilitaires.Jardinage (50 BCE-200 years +100 years) Trouvé le 15 Oct 2012 à Beaulieu, Mareuil-sur-Lay
</td>
<td style="text-align: left;">
62
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
75
</td>
<td style="text-align: left;">
Utilitaires (1900 ±20 years) Trouvé le 2019 à Estuaire du Lay, Vendée
</td>
<td style="text-align: left;">
76
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
114
</td>
<td style="text-align: left;">
Utilitaires.Cuisine.Récipients (1700 BCE ±100 years) Trouvé le 5 Feb 2020 à Estuaire du Lay, Vendée
</td>
<td style="text-align: left;">
76
</td>
</tr>
</tbody>
</table>
<p>We find these values of <em>z.h.id.Objet</em> in the field <em>z.h.reversePointer</em> of the dataframe <em>Place</em> :</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>Place <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(z.h.id.Place,z.h.title.Place,z.h.reversePointer) <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 18%">
<col style="width: 53%">
<col style="width: 27%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
z.h.id.Place
</th>
<th style="text-align: left;">
z.h.title.Place
</th>
<th style="text-align: left;">
z.h.reversePointer
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
62
</td>
<td style="text-align: left;">
Beaulieu, Mareuil-sur-Lay
</td>
<td style="text-align: left;">
61 // 73
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
66
</td>
<td style="text-align: left;">
Festival de Mervent, Vendée
</td>
<td style="text-align: left;">
65 // 72
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
68
</td>
<td style="text-align: left;">
Exposition de Brétignolles
</td>
<td style="text-align: left;">
116 // 67
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
70
</td>
<td style="text-align: left;">
Bois des Girondins, La Roche-sur-Yon
</td>
<td style="text-align: left;">
69
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
76
</td>
<td style="text-align: left;">
Estuaire du Lay, Vendée
</td>
<td style="text-align: left;">
114 // 75
</td>
</tr>
</tbody>
</table>
<p>Normally, the dataframe <em>Place</em> contains a field of type “geo” : how to deal with this field ? See below, “<em>Dealing with temporal, spatial and file fields</em>”.</p>
<p> </p>
</div>
<div class="section level2">
<h2 id="dealing-with-temporal-spatial-and-file-fields">Dealing with <em>temporal</em>, <em>spatial</em> and <em>file</em> fields<a class="anchor" aria-label="anchor" href="#dealing-with-temporal-spatial-and-file-fields"></a>
</h2>
<p>We name “temporal, spatial and file fields” the values informed in fields (or “detail types” in Heurist language) of type “date”, “geo” or “file”.</p>
<p>These fields match a value “<em>date</em>”, “<em>geo</em>” or “<em>file</em>” in the column <em>field.type</em> of the dataframe <em>z.h.tables.fields</em>. To have a look at only informed fields (and not empty fields), we select only fields matching a value “<em>no empty</em>” in the column <em>field.empty</em> of <em>z.h.tables.fields</em>.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>z.h.tables.fields <span class="sc">%&gt;%</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(field.type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"date"</span>,<span class="st">"geo"</span>,<span class="st">"file"</span>) <span class="sc">&amp;</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>           field.empty<span class="sc">==</span><span class="st">"no empty"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(table.name,field.DisplayName,field.type) <span class="sc">%&gt;%</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(table.name,field.type) <span class="sc">%&gt;%</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
table.name
</th>
<th style="text-align: left;">
field.DisplayName
</th>
<th style="text-align: left;">
field.type
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Laboratoire
</td>
<td style="text-align: left;">
Date de création
</td>
<td style="text-align: left;">
date
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Laboratoire
</td>
<td style="text-align: left;">
Date de fin
</td>
<td style="text-align: left;">
date
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Laboratoire
</td>
<td style="text-align: left;">
Logo
</td>
<td style="text-align: left;">
file
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Date de création
</td>
<td style="text-align: left;">
date
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Date de la trouvaille
</td>
<td style="text-align: left;">
date
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Objet - Exposition
</td>
<td style="text-align: left;">
Start date
</td>
<td style="text-align: left;">
date
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Objet - Exposition
</td>
<td style="text-align: left;">
End date
</td>
<td style="text-align: left;">
date
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Personne
</td>
<td style="text-align: left;">
Date de naissance
</td>
<td style="text-align: left;">
date
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Personne
</td>
<td style="text-align: left;">
Lieu de naissance
</td>
<td style="text-align: left;">
geo
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Place
</td>
<td style="text-align: left;">
Location (mappable)
</td>
<td style="text-align: left;">
geo
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Record relationship
</td>
<td style="text-align: left;">
Start date/time
</td>
<td style="text-align: left;">
date
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Record relationship
</td>
<td style="text-align: left;">
End date/time
</td>
<td style="text-align: left;">
date
</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="temporal-fields">
<em>Temporal</em> fields<a class="anchor" aria-label="anchor" href="#temporal-fields"></a>
</h3>
<p>There are different types of “temporal” fields :</p>
<ul>
<li>
<strong>C14 Date</strong> : if the Heurist contributor has clicked on the symbol “clock”, then <em>Radiometric</em> tab ;</li>
<li>
<strong>Date Range</strong> : if the Heurist contributor has clicked on the symbol “clock”, then <em>Fuzzy Range</em> tab ;</li>
<li>
<strong>Approximate Date</strong> : if the Heurist contributor has clicked on the symbol “clock”, then <em>Simple Range</em> tab ;</li>
<li>
<strong>Not indexed</strong> : if the Heurist contributor hasn’t clicked on the symbol “clock” or “calendar”, and if the value is unlike “YYYY-MM-DD” (or “YYYY-MM” or “YYYY”) ;</li>
<li>
<strong>Simple Date</strong> and <strong>Other Date</strong> : actually, since a Heurist’s update in 2023, I’ve not understood the difference beetween them… Unlike <em>Other Dates</em>, <em>Simple Dates</em> are defined through a <strong>&lt;temporal&gt; tag in the Heurist XML export</strong>. In November 2023, some actions certainly create &lt;temporal&gt; tags : if we click on the symbol “clock” AND THEN whe choose ‘Type of Determination’ OR define a ‘Simple Range’, ‘Fuzzy Range’ or ‘Radiometric’. But sometimes, when the value looks like “YYYY-MM-DD” or “YYYY”, a &lt;temporal&gt; tag appears whereas these actions have not been taken. However, writing a value like “YYYY-MM-DD” or “YYYY” does not systematically create a &lt;temporal&gt; tag ! <span style="color:grey"> Before 2023, a “temporal field” without any &lt;temporal&gt; tag meant that the contributor had never clicked on clock or calendar symbols for this field, and then we used to inform “Manual Date” instead of “Other Date”.</span>
</li>
</ul>
<p>“Temporal” fields are declined into several columns according to the “temporal.type” of the value in the original XML file.</p>
<p>For example, in the dataframe <em>Personne</em>, values of <em>Date de naissance</em> have been recorded by three ways :</p>
<ul>
<li>manually, without following the “YYYY-MM-DD” format (= “<strong><em>Not indexed</em></strong>”)</li>
<li>following the “YYYY-MM-DD” (or “YYYY” or “YYYY-MM”) format (= “<strong><em>Simple Date</em></strong>” and “<strong><em>Other Date</em></strong>”)</li>
</ul>
<!-- --><div class="sourceCode" id="cb33"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count "temporal.type"</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>Personne <span class="sc">%&gt;%</span> <span class="fu">count</span>(<span class="st">`</span><span class="at">Date de naissance.temporal.type</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
Date de naissance.temporal.type
</th>
<th style="text-align: right;">
n
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Not indexed
</td>
<td style="text-align: right;">
1
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Other Date
</td>
<td style="text-align: right;">
3
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Simple Date
</td>
<td style="text-align: right;">
2
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb34"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Colnames</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Personne)[<span class="fu">grepl</span>(<span class="st">"^Date de naissance.+"</span>,<span class="fu">names</span>(Personne))]</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Date de naissance.temporal.raw"  "Date de naissance.temporal.type"</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3] "Date de naissance.DAT.raw"       "Date de naissance.DAT.year"     </span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5] "Date de naissance.DAT.month"     "Date de naissance.DAT.day"      </span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [7] "Date de naissance.property.COM"  "Date de naissance.property.DET"</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Records</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>Personne <span class="sc">%&gt;%</span> </span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(z.h.title.Personne,<span class="fu">starts_with</span>(<span class="st">"Date de naissance"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 10%">
<col style="width: 35%">
<col style="width: 8%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 8%">
<col style="width: 8%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
z.h.title.Personne
</th>
<th style="text-align: left;">
Date de naissance.temporal.raw
</th>
<th style="text-align: left;">
Date de naissance.temporal.type
</th>
<th style="text-align: left;">
Date de naissance.DAT.raw
</th>
<th style="text-align: left;">
Date de naissance.DAT.year
</th>
<th style="text-align: left;">
Date de naissance.DAT.month
</th>
<th style="text-align: left;">
Date de naissance.DAT.day
</th>
<th style="text-align: left;">
Date de naissance.property.COM
</th>
<th style="text-align: left;">
Date de naissance.property.DET
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Lou Ragan (invalid temporal object) Male
</td>
<td style="text-align: left;">
Printemps 1960
</td>
<td style="text-align: left;">
Not indexed
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Sandra Lacouverture (1987) Female
</td>
<td style="text-align: left;">
1987
</td>
<td style="text-align: left;">
Other Date
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
1987
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Edgar Letracteur (3 Apr 1985) Male
</td>
<td style="text-align: left;">
{“timestamp”:{“in”:“1985-04-03”,“type”:“s”},“determination”:“1”,“comment”:“1985-04-03”,“estMinDate”:1985.0403,“estMaxDate”:1985.0403}
</td>
<td style="text-align: left;">
Simple Date
</td>
<td style="text-align: left;">
1985-04-03
</td>
<td style="text-align: left;">
1985
</td>
<td style="text-align: left;">
04
</td>
<td style="text-align: left;">
03
</td>
<td style="text-align: left;">
1985-04-03
</td>
<td style="text-align: left;">
Attested
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Gérard Manvussa (20 Jan 1971) Male
</td>
<td style="text-align: left;">
{“timestamp”:{“in”:“1971-01-20”,“type”:“s”},“comment”:“1971-01-20”,“estMinDate”:1971.012,“estMaxDate”:1971.012}
</td>
<td style="text-align: left;">
Simple Date
</td>
<td style="text-align: left;">
1971-01-20
</td>
<td style="text-align: left;">
1971
</td>
<td style="text-align: left;">
01
</td>
<td style="text-align: left;">
20
</td>
<td style="text-align: left;">
1971-01-20
</td>
<td style="text-align: left;">
NA
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Jade Or (1976) Female
</td>
<td style="text-align: left;">
1976
</td>
<td style="text-align: left;">
Other Date
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
1976
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Paul Ochon (22 Jul 1975) Male
</td>
<td style="text-align: left;">
1975-07-22
</td>
<td style="text-align: left;">
Other Date
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
1975
</td>
<td style="text-align: left;">
7
</td>
<td style="text-align: left;">
22
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
</tr>
</tbody>
</table>
<p>Columns containing “<strong>.DAT.</strong>” are only informed for “<em>Simple Dates</em>”, “<em>Approximate Dates</em>” and “<em>Other Dates</em>” (N.B : columns ending with “<strong>.DAT.raw</strong>” are only informed for “<em>Simple Dates</em>” and “<em>Approximate Dates</em>”).</p>
<p>If we want to transform “temporal” fields into “date vectors”, we have to be careful :</p>
<ul>
<li>some values can <strong>not</strong> refer to a “numeric” date (example : “Printemps 1960”) - that’s why it’s important to distinguish “Not indexed” dates ;</li>
<li>“Other Dates” formats can be different : some of those can refer to a specific day, others to a month, others to a year…</li>
</ul>
<p>In following lines, we choose to consider the first day of the first month, when day or month are not informed.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>Personne <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Date de naissance.DAT.month</span><span class="st">`</span>,</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">`</span><span class="at">Date de naissance.DAT.day</span><span class="st">`</span>),</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>            replace_na,<span class="st">"01"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_naiss =</span> <span class="fu">as.Date</span>(<span class="fu">str_c</span>(<span class="st">`</span><span class="at">Date de naissance.DAT.year</span><span class="st">`</span>,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>                                <span class="st">`</span><span class="at">Date de naissance.DAT.month</span><span class="st">`</span>,</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>                                <span class="st">`</span><span class="at">Date de naissance.DAT.day</span><span class="st">`</span>,</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>                                <span class="at">sep=</span><span class="st">"-"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(z.h.title.Personne,date_naiss) <span class="sc">%&gt;%</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date_naiss) <span class="sc">%&gt;%</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
z.h.title.Personne
</th>
<th style="text-align: left;">
date_naiss
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Gérard Manvussa (20 Jan 1971) Male
</td>
<td style="text-align: left;">
1971-01-20
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Paul Ochon (22 Jul 1975) Male
</td>
<td style="text-align: left;">
1975-07-22
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Jade Or (1976) Female
</td>
<td style="text-align: left;">
1976-01-01
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Edgar Letracteur (3 Apr 1985) Male
</td>
<td style="text-align: left;">
1985-04-03
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Sandra Lacouverture (1987) Female
</td>
<td style="text-align: left;">
1987-01-01
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Lou Ragan (invalid temporal object) Male
</td>
<td style="text-align: left;">
NA
</td>
</tr>
</tbody>
</table>
<p>In the dataframe <em>Objet</em>, values of <em>Date de création</em> have been recorded by three ways : “Approximate Date”, “C14 Date” and “Date range” (see below).</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>Objet <span class="sc">%&gt;%</span> <span class="fu">count</span>(<span class="st">`</span><span class="at">Date de création.temporal.type</span><span class="st">`</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th style="text-align: left;">
Date de création.temporal.type
</th>
<th style="text-align: right;">
n
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Approximate Date
</td>
<td style="text-align: right;">
1
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
C14 Date
</td>
<td style="text-align: right;">
3
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Date Range
</td>
<td style="text-align: right;">
1
</td>
</tr>
</tbody>
</table>
<p>Therefore, <em>Date de création</em> is declined into several columns :</p>
<ul>
<li>
<em>TPQ</em> (Terminus Post-Quem),<em>PDB</em> (Probable Date Begin),<em>PDE</em> (Probable Date End) and <em>TAQ</em> (Terminus Ante-Quem) deal with “<strong><em>Date Range</em></strong>” ;</li>
<li>
<em>BCE</em> (Before Current Era),<em>BDP</em> (Before Present),<em>DEV</em> (Std dev), <em>DVP</em> (Pos Dev) and <em>DVN</em> (Neg Dev) deal with “<strong><em>C14 Date</em></strong>” ;</li>
<li>
<em>DAT</em> (Date) and <em>RNG</em> (Range) deal with “<strong><em>Approximate Date</em></strong>”.</li>
</ul>
<!-- --><div class="sourceCode" id="cb37"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Colnames</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Objet)[<span class="fu">grepl</span>(<span class="st">"^Date de création.+"</span>,<span class="fu">names</span>(Objet))]</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "Date de création.temporal.raw"  "Date de création.temporal.type"</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3] "Date de création.DAT.raw"       "Date de création.DAT.year"     </span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5] "Date de création.TPQ.raw"       "Date de création.TPQ.year"     </span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] "Date de création.PDB.raw"       "Date de création.PDB.year"     </span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9] "Date de création.PDE.raw"       "Date de création.PDE.year"     </span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] "Date de création.TAQ.raw"       "Date de création.TAQ.year"     </span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] "Date de création.BCE.raw"       "Date de création.BCE.year"     </span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15] "Date de création.BPD.raw"       "Date de création.BPD.year"     </span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [17] "Date de création.DEV.raw"       "Date de création.DEV.year"     </span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [19] "Date de création.DVP.raw"       "Date de création.DVP.year"     </span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [21] "Date de création.DVN.raw"       "Date de création.DVN.year"     </span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [23] "Date de création.RNG.raw"       "Date de création.RNG.year"     </span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [25] "Date de création.property.COD"  "Date de création.property.DET"</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Records</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>Objet <span class="sc">%&gt;%</span> </span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(z.h.title.Objet,<span class="fu">starts_with</span>(<span class="st">"Date de création"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col style="width: 10%">
<col style="width: 18%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 3%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
z.h.title.Objet
</th>
<th style="text-align: left;">
Date de création.temporal.raw
</th>
<th style="text-align: left;">
Date de création.temporal.type
</th>
<th style="text-align: left;">
Date de création.DAT.raw
</th>
<th style="text-align: left;">
Date de création.DAT.year
</th>
<th style="text-align: left;">
Date de création.TPQ.raw
</th>
<th style="text-align: left;">
Date de création.TPQ.year
</th>
<th style="text-align: left;">
Date de création.PDB.raw
</th>
<th style="text-align: left;">
Date de création.PDB.year
</th>
<th style="text-align: left;">
Date de création.PDE.raw
</th>
<th style="text-align: left;">
Date de création.PDE.year
</th>
<th style="text-align: left;">
Date de création.TAQ.raw
</th>
<th style="text-align: left;">
Date de création.TAQ.year
</th>
<th style="text-align: left;">
Date de création.BCE.raw
</th>
<th style="text-align: left;">
Date de création.BCE.year
</th>
<th style="text-align: left;">
Date de création.BPD.raw
</th>
<th style="text-align: left;">
Date de création.BPD.year
</th>
<th style="text-align: left;">
Date de création.DEV.raw
</th>
<th style="text-align: left;">
Date de création.DEV.year
</th>
<th style="text-align: left;">
Date de création.DVP.raw
</th>
<th style="text-align: left;">
Date de création.DVP.year
</th>
<th style="text-align: left;">
Date de création.DVN.raw
</th>
<th style="text-align: left;">
Date de création.DVN.year
</th>
<th style="text-align: left;">
Date de création.RNG.raw
</th>
<th style="text-align: left;">
Date de création.RNG.year
</th>
<th style="text-align: left;">
Date de création.property.COD
</th>
<th style="text-align: left;">
Date de création.property.DET
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Utilitaires.Cuisine.Ustensiles (3000 BCE ±500 years) Trouvé le 3 May 2015 à Beaulieu, Mareuil-sur-Lay
</td>
<td style="text-align: left;">
{“timestamp”:{“in”:-3000,“type”:“c”,“bp”:false,“deviation”:“P500Y”},“native”:“3000 BCE”,“labcode”:“VOSON”,“estMinDate”:-3500,“estMaxDate”:-2500}
</td>
<td style="text-align: left;">
C14 Date
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
3000
</td>
<td style="text-align: left;">
3000
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
P500Y
</td>
<td style="text-align: left;">
500
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
VOSON
</td>
<td style="text-align: left;">
NA
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Décoratifs (1700 to 1800) Trouvé le 15 Jan 2015 à Bois des Girondins, La Roche-sur-Yon
</td>
<td style="text-align: left;">
{“start”:{“earliest”:“1700”,“latest”:“1740”},“end”:{“latest”:“1800”,“earliest”:“1760”},“estMinDate”:1700,“estMaxDate”:1800.1231}
</td>
<td style="text-align: left;">
Date Range
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
1700
</td>
<td style="text-align: left;">
1700
</td>
<td style="text-align: left;">
1740
</td>
<td style="text-align: left;">
1740
</td>
<td style="text-align: left;">
1760
</td>
<td style="text-align: left;">
1760
</td>
<td style="text-align: left;">
1800
</td>
<td style="text-align: left;">
1800
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Utilitaires.Jardinage (50 BCE-200 years +100 years) Trouvé le 15 Oct 2012 à Beaulieu, Mareuil-sur-Lay
</td>
<td style="text-align: left;">
{“timestamp”:{“in”:-50,“type”:“c”,“bp”:true,“deviation_negative”:“P200Y”,“deviation_positive”:“P100Y”},“native”:“2000 BP”,“labcode”:“VOSON”,“estMinDate”:-250,“estMaxDate”:150}
</td>
<td style="text-align: left;">
C14 Date
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
2000
</td>
<td style="text-align: left;">
2000
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
P100Y
</td>
<td style="text-align: left;">
100
</td>
<td style="text-align: left;">
P200Y
</td>
<td style="text-align: left;">
200
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
VOSON
</td>
<td style="text-align: left;">
NA
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Utilitaires (1900 ±20 years) Trouvé le 2019 à Estuaire du Lay, Vendée
</td>
<td style="text-align: left;">
{“timestamp”:{“in”:“1900”,“deviation”:“P20Y”,“type”:“f”},“determination”:“3”,“estMinDate”:1880,“estMaxDate”:1920}
</td>
<td style="text-align: left;">
Approximate Date
</td>
<td style="text-align: left;">
1900
</td>
<td style="text-align: left;">
1900
</td>
<td style="text-align: left;">
1880
</td>
<td style="text-align: left;">
1880
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
1920
</td>
<td style="text-align: left;">
1920
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
P20Y
</td>
<td style="text-align: left;">
20
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
Measurement
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Utilitaires.Cuisine.Récipients (1700 BCE ±100 years) Trouvé le 5 Feb 2020 à Estuaire du Lay, Vendée
</td>
<td style="text-align: left;">
{“timestamp”:{“in”:-1700,“type”:“c”,“bp”:false,“deviation”:“P100Y”},“native”:“1700 BCE”,“labcode”:“blabla”,“estMinDate”:-1800,“estMaxDate”:-1600}
</td>
<td style="text-align: left;">
C14 Date
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
1700
</td>
<td style="text-align: left;">
1700
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
P100Y
</td>
<td style="text-align: left;">
100
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
blabla
</td>
<td style="text-align: left;">
NA
</td>
</tr>
</tbody>
</table>
<p>Values of “temporal” fields can be described by several columns specifying “year”, “month”, “day” (see above <em>Date de naissance</em>), but also “hours”, “minutes” and “seconds”. For example, <em>End date</em> in the dataframe <em>Objet Exposition</em> :</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Colnames</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(<span class="st">`</span><span class="at">Objet - Exposition</span><span class="st">`</span>)[<span class="fu">grepl</span>(<span class="st">"^End date.+"</span>,<span class="fu">names</span>(<span class="st">`</span><span class="at">Objet - Exposition</span><span class="st">`</span>))]</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "End date.temporal.raw"  "End date.temporal.type" "End date.DAT.raw"      </span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4] "End date.DAT.year"      "End date.DAT.month"     "End date.DAT.day"      </span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] "End date.DAT.hour"      "End date.DAT.minutes"   "End date.DAT.seconds"  </span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10] "End date.property.DET"  "End date.1"             "End date.2"</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Records</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">Objet - Exposition</span><span class="st">`</span> <span class="sc">%&gt;%</span> </span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">`</span><span class="at">z.h.id.Objet - Exposition</span><span class="st">`</span>,<span class="fu">starts_with</span>(<span class="st">"End date"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 7%">
<col style="width: 32%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
z.h.id.Objet - Exposition
</th>
<th style="text-align: left;">
End date.temporal.raw
</th>
<th style="text-align: left;">
End date.temporal.type
</th>
<th style="text-align: left;">
End date.DAT.raw
</th>
<th style="text-align: left;">
End date.DAT.year
</th>
<th style="text-align: left;">
End date.DAT.month
</th>
<th style="text-align: left;">
End date.DAT.day
</th>
<th style="text-align: left;">
End date.DAT.hour
</th>
<th style="text-align: left;">
End date.DAT.minutes
</th>
<th style="text-align: left;">
End date.DAT.seconds
</th>
<th style="text-align: left;">
End date.property.DET
</th>
<th style="text-align: left;">
End date
</th>
<th style="text-align: left;">
End date.1
</th>
<th style="text-align: left;">
End date.2
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
65
</td>
<td style="text-align: left;">
2015-12-01 16:30
</td>
<td style="text-align: left;">
Other Date
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
2015
</td>
<td style="text-align: left;">
12
</td>
<td style="text-align: left;">
1
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
00 // 16 // 30
</td>
<td style="text-align: left;">
00 // 16 // 30
</td>
<td style="text-align: left;">
00 // 16 // 30
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
67
</td>
<td style="text-align: left;">
{“timestamp”:{“in”:“2017-04-10 17:30:30”,“type”:“s”},“determination”:“1”,“estMinDate”:2017.041,“estMaxDate”:2017.041}
</td>
<td style="text-align: left;">
Simple Date
</td>
<td style="text-align: left;">
2017-04-10 17:30:30
</td>
<td style="text-align: left;">
2017
</td>
<td style="text-align: left;">
04
</td>
<td style="text-align: left;">
10
</td>
<td style="text-align: left;">
17
</td>
<td style="text-align: left;">
30
</td>
<td style="text-align: left;">
30
</td>
<td style="text-align: left;">
Attested
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
72
</td>
<td style="text-align: left;">
2016-12-15
</td>
<td style="text-align: left;">
Other Date
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
2016
</td>
<td style="text-align: left;">
12
</td>
<td style="text-align: left;">
15
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
116
</td>
<td style="text-align: left;">
|VER=1|TYP=s|DAT=2022-12-09 16|DET=0|CLD=Gregorian
</td>
<td style="text-align: left;">
Not indexed
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
<td style="text-align: left;">
NA
</td>
</tr>
</tbody>
</table>
<p>N.B : Values of “raw” for dates have been modified in 2023, as a result of a Heurist’s update. See below some examples of changes :</p>
<table class="table">
<colgroup>
<col style="width: 4%">
<col style="width: 43%">
<col style="width: 51%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
temporal.type
</th>
<th style="text-align: left;">
Before 2023
</th>
<th style="text-align: left;">
After a Heurist’s update in 2023
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Date Range
</td>
<td style="text-align: left;">
VER=1|TYP=p|TPQ=2012-10-15|TAQ=2015-05-03|DET=0|CLD=Gregorian|SPF=0|EPF=0
</td>
<td style="text-align: left;">
{“start”:{“earliest”:“2012-10-15”},“end”:{“latest”:“2015-05-03”},“estMinDate”:2012.1015,“estMaxDate”:2015.0503}
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Date Range
</td>
<td style="text-align: left;">
VER=1|TYP=p|PDB=1740|PDE=1760|TPQ=1700|TAQ=1800|DET=0|CLD=Gregorian|SPF=0|EPF=0
</td>
<td style="text-align: left;">
{“start”:{“earliest”:“1700”,“latest”:“1740”},“end”:{“latest”:“1800”,“earliest”:“1760”},“estMinDate”:1700,“estMaxDate”:1800.1231}
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
C14 Date
</td>
<td style="text-align: left;">
VER=1|TYP=c|BCE=1700|DEV=P100Y|DET=0|COD=blabla
</td>
<td style="text-align: left;">
{“timestamp”:{“in”:-1700,“type”:“c”,“bp”:false,“deviation”:“P100Y”},“native”:“1700 BCE”,“labcode”:“blabla”,“estMinDate”:-1800,“estMaxDate”:-1600}
</td>
</tr>
</tbody>
</table>
<p>It seems that the format “<em>Before 2023</em>” remains for some dates that, after a Heurist’update, have become not indexed. See this example below :</p>
<p><img src="reference/figures/scanprint_not_indexed_date.png" height="200" style="height:220px;"></p>
</div>
<div class="section level3">
<h3 id="spatial-fields">
<em>Spatial</em> fields<a class="anchor" aria-label="anchor" href="#spatial-fields"></a>
</h3>
<p>“Spatial” fields are always declined into 2 columns :</p>
<ul>
<li>one finishing by <strong>“.geo.type”</strong>
</li>
<li>one finishing by <strong>“.geo.wkt”</strong>
</li>
</ul>
<p>Let’s have a look with <em>Location (mappable)</em> of the dataframe <em>Place</em> :</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Colnames</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Place)[<span class="fu">grepl</span>(<span class="st">"^Location </span><span class="sc">\\</span><span class="st">(mappable</span><span class="sc">\\</span><span class="st">).+"</span>,<span class="fu">names</span>(Place))]</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Location (mappable).geo.type" "Location (mappable).geo.wkt"</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Records</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>Place <span class="sc">%&gt;%</span> </span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(z.h.title.Place,<span class="fu">starts_with</span>(<span class="st">"Location (mappable)"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 17%">
<col style="width: 13%">
<col style="width: 68%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
z.h.title.Place
</th>
<th style="text-align: left;">
Location (mappable).geo.type
</th>
<th style="text-align: left;">
Location (mappable).geo.wkt
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Beaulieu, Mareuil-sur-Lay
</td>
<td style="text-align: left;">
point
</td>
<td style="text-align: left;">
POINT(-1.22474 46.527361)
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Festival de Mervent, Vendée
</td>
<td style="text-align: left;">
point
</td>
<td style="text-align: left;">
POINT(-0.76561 46.534892)
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Exposition de Brétignolles
</td>
<td style="text-align: left;">
point
</td>
<td style="text-align: left;">
POINT(-1.853889 46.628611)
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Bois des Girondins, La Roche-sur-Yon
</td>
<td style="text-align: left;">
point
</td>
<td style="text-align: left;">
POINT(-1.3693 46.715296)
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Estuaire du Lay, Vendée
</td>
<td style="text-align: left;">
polygon
</td>
<td style="text-align: left;">
POLYGON((-1.316729 46.3353,-1.314411 46.328301,-1.305571 46.31958,-1.29673 46.318631,-1.299734 46.326877,-1.30909 46.332038,-1.316729 46.3353))
</td>
</tr>
</tbody>
</table>
<p>Using <em>sf</em> package, we’re abble to cartography a “spatial field” of type “point” by this way :</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a sf object with sf::st_as_sf()</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>sf_Place_point <span class="ot">&lt;-</span> Place <span class="sc">%&gt;%</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Location (mappable).geo.type</span><span class="st">`</span><span class="sc">==</span><span class="st">"point"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"geom"</span><span class="ot">=</span><span class="st">"Location (mappable).geo.wkt"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">wkt =</span> <span class="st">"geom"</span>,<span class="at">crs =</span> <span class="fu">st_crs</span>(<span class="dv">4326</span>))</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting with ggplot2</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>sf_Place_point <span class="sc">%&gt;%</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">col=</span><span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_label</span>(<span class="fu">aes</span>(<span class="at">label=</span>z.h.title.Place,<span class="at">hjust=</span><span class="dv">0</span>, <span class="at">vjust =</span> <span class="dv">1</span>), </span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">col=</span><span class="st">"red"</span>,<span class="at">size=</span><span class="fl">2.7</span>)</span></code></pre></div>
<p><img src="reference/figures/Spat_Plot_pourRM.png" height="220" style="height:240px;"></p>
<p> </p>
</div>
<div class="section level3">
<h3 id="file-fields">
<em>File</em> fields<a class="anchor" aria-label="anchor" href="#file-fields"></a>
</h3>
<p>“File” fields may be declined into several columns describing file paradata.</p>
<p>Let’s have a look with <em>Logo</em> of the dataframe <em>Laboratoire</em> :</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Colnames</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Laboratoire)[<span class="fu">grepl</span>(<span class="st">"^Logo.+"</span>,<span class="fu">names</span>(Laboratoire))]</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Logo.file.date"     "Logo.file.fileSize" "Logo.file.id"      </span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4] "Logo.file.mimeType" "Logo.file.nonce"    "Logo.file.origName"</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [7] "Logo.file.url"</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Records</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>Laboratoire <span class="sc">%&gt;%</span> </span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(z.h.title.Laboratoire,<span class="fu">starts_with</span>(<span class="st">"Logo"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 14%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 14%">
<col style="width: 6%">
<col style="width: 37%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
z.h.title.Laboratoire
</th>
<th style="text-align: left;">
Logo.file.date
</th>
<th style="text-align: left;">
Logo.file.fileSize
</th>
<th style="text-align: left;">
Logo.file.id
</th>
<th style="text-align: left;">
Logo.file.mimeType
</th>
<th style="text-align: left;">
Logo.file.nonce
</th>
<th style="text-align: left;">
Logo.file.origName
</th>
<th style="text-align: left;">
Logo.file.url
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
LRO - Laboratoire de Recherche d’Objets
</td>
<td style="text-align: left;">
2023-02-08 06:08:50
</td>
<td style="text-align: left;">
1 kB
</td>
<td style="text-align: left;">
2
</td>
<td style="text-align: left;">
image/png
</td>
<td style="text-align: left;">
1c21c313d58abf1443923f88681e2816efe808ae
</td>
<td style="text-align: left;">
logo_labo_LRO.png
</td>
<td style="text-align: left;">
<a href="https://heurist.huma-num.fr/heurist/?db=aliet_test_R&amp;file=1c21c313d58abf1443923f88681e2816efe808ae" class="external-link uri">https://heurist.huma-num.fr/heurist/?db=aliet_test_R&amp;file=1c21c313d58abf1443923f88681e2816efe808ae</a>
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
IAO - Institut Afficionados d’Objets
</td>
<td style="text-align: left;">
2023-02-08 06:08:31
</td>
<td style="text-align: left;">
1 kB
</td>
<td style="text-align: left;">
1
</td>
<td style="text-align: left;">
image/png
</td>
<td style="text-align: left;">
840c8ff9cf99cf29958338c197da9cb028f5b613
</td>
<td style="text-align: left;">
logo_labo_IAO.png
</td>
<td style="text-align: left;">
<a href="https://heurist.huma-num.fr/heurist/?db=aliet_test_R&amp;file=840c8ff9cf99cf29958338c197da9cb028f5b613" class="external-link uri">https://heurist.huma-num.fr/heurist/?db=aliet_test_R&amp;file=840c8ff9cf99cf29958338c197da9cb028f5b613</a>
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
OT - Objets Toujours
</td>
<td style="text-align: left;">
2023-02-20 07:17:52
</td>
<td style="text-align: left;">
2 kB
</td>
<td style="text-align: left;">
3
</td>
<td style="text-align: left;">
image/png
</td>
<td style="text-align: left;">
11dbda0ecd0029a73c3e327be7e1467a49aa8056
</td>
<td style="text-align: left;">
logo_labo_OT.png
</td>
<td style="text-align: left;">
<a href="https://heurist.huma-num.fr/heurist/?db=aliet_test_R&amp;file=11dbda0ecd0029a73c3e327be7e1467a49aa8056" class="external-link uri">https://heurist.huma-num.fr/heurist/?db=aliet_test_R&amp;file=11dbda0ecd0029a73c3e327be7e1467a49aa8056</a>
</td>
</tr>
</tbody>
</table>
<p>When you click on the URL (column <em>Logo.file.URL</em>), the file appears in a new window.</p>
<p> </p>
</div>
</div>
</div>
<div class="section level1">
<h1 id="renaming-tables-and-columns---if-desired">Renaming tables and columns - if desired<a class="anchor" aria-label="anchor" href="#renaming-tables-and-columns---if-desired"></a>
</h1>
<p>To avoid using this symbol <strong>`</strong> in R, remember that you can easily remove spaces, dashes, slashes, commas, quotations marks, ampersands and parenthesis from colnames and dataframes names. Indeed, if “TRUE”, the argument <strong><em>rename.tab.col</em></strong> of the <em>hr_import</em> function replaces these characters by dots.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hr_import</span>(<span class="at">data.file=</span><span class="st">"documents/data_example/aliet_test_R_data.xml"</span>,</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">structure.file=</span><span class="st">"documents/data_example/aliet_test_R_structure.xml"</span>,</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">rename.tab.col=</span><span class="cn">TRUE</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; We're importing data and structure files (most time-consuming step)... Thank you for waiting...</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data and structure files have been successfully imported. Now we're selecting and managing data... Thank you for waiting...</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; We've finished. It's ready to use !</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Spaces, dashes, slashes, commas, quotations marks, ampersands and parenthesis have been removed from names, replaced with dots</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Import has required 7.86 secs</span></span></code></pre></div>
<p>Dataframes names :</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Laboratoire"         "Objet"               "Objet.Exposition"   </span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4] "Personne"            "Place"               "Record.relationship"</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [7] "z.h.tables.fields"   "z.h.vocabularies"</span></span></code></pre></div>
<p>And for instance, colnames of <em>Objet</em> when <em>rename.tab.col=F</em> and <em>rename.tab.col=T</em> :</p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
rename.tab.col = F
</th>
<th style="text-align: left;">
rename.tab.col = T
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Type d’objet
</td>
<td style="text-align: left;">
Type.d.objet
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Hauteur (cm)
</td>
<td style="text-align: left;">
Hauteur.cm.
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Date de la trouvaille.temporal.raw
</td>
<td style="text-align: left;">
Date.de.la.trouvaille.temporal.raw
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Date de la trouvaille.temporal.type
</td>
<td style="text-align: left;">
Date.de.la.trouvaille.temporal.type
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Date de la trouvaille.DAT.raw
</td>
<td style="text-align: left;">
Date.de.la.trouvaille.DAT.raw
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Date de la trouvaille.DAT.year
</td>
<td style="text-align: left;">
Date.de.la.trouvaille.DAT.year
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Date de la trouvaille.DAT.month
</td>
<td style="text-align: left;">
Date.de.la.trouvaille.DAT.month
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Date de la trouvaille.DAT.day
</td>
<td style="text-align: left;">
Date.de.la.trouvaille.DAT.day
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Date de la trouvaille.property.COM
</td>
<td style="text-align: left;">
Date.de.la.trouvaille.property.COM
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Date de la trouvaille.property.DET
</td>
<td style="text-align: left;">
Date.de.la.trouvaille.property.DET
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Lieu de la trouvaille
</td>
<td style="text-align: left;">
Lieu.de.la.trouvaille
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Découvreur(s)
</td>
<td style="text-align: left;">
Découvreur.s.
</td>
</tr>
</tbody>
</table>
<p><strong>Please note</strong> : The parameter <em>rename.tab.col=TRUE</em> creates two additional columns in the dataframe <em>z.h.tables.fields</em> : <strong><em>table.name.renamed</em></strong> and <strong><em>field.renamed</em></strong>.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>z.h.tables.fields <span class="sc">%&gt;%</span> <span class="fu">filter</span>(table.name<span class="sc">==</span><span class="st">"Objet"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(table.name,field.DisplayName,table.name.renamed,field.renamed) <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<colgroup>
<col style="width: 14%">
<col style="width: 29%">
<col style="width: 25%">
<col style="width: 29%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">
table.name
</th>
<th style="text-align: left;">
field.DisplayName
</th>
<th style="text-align: left;">
table.name.renamed
</th>
<th style="text-align: left;">
field.renamed
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Date de création
</td>
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Date.de.création
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Lieu de la trouvaille
</td>
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Lieu.de.la.trouvaille
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Type d’objet
</td>
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Type.d.objet
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Découvreur(s)
</td>
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Découvreur.s.
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Expositions
</td>
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Expositions
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Commentaires
</td>
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Commentaires
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Date de la trouvaille
</td>
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Date.de.la.trouvaille
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Hauteur (cm)
</td>
<td style="text-align: left;">
Objet
</td>
<td style="text-align: left;">
Hauteur.cm.
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level1">
<h1 id="saving-data-into-a-r-data-file">Saving data into a R data file<a class="anchor" aria-label="anchor" href="#saving-data-into-a-r-data-file"></a>
</h1>
<p><strong>If <em>hr_import()</em> has taken a long time</strong>, remember that you can save your workspace to a file named <em>.RData</em>, and quickly restore it. We give an example in following lines (we’d like to save all objects of the enviroment in a folder named “export”) :</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Saving all objects of the environment</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save.image</span>(<span class="at">file =</span> <span class="st">"export/aliet_test_R.RData"</span>)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Restoring all of these objects</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"export/aliet_test_R.RData"</span>)</span></code></pre></div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/alietteroux/HeuristToR/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/alietteroux/HeuristToR/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 2)</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing HeuristToR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Aliette Roux <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Aliette Roux.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
